{% extends "base.html" %}
{% block title %}Find a Trip{% endblock %}
{% block content %}
  <h2>Find a Trip</h2>
  <form method="POST" action="/find_trip">
    <label>Origin:</label>
    <input type="text" name="origin" required><br>
    <label>Destination:</label>
    <input type="text" name="destination" required><br>
    <label>Schedule Date:</label>
    <input type="date" name="schedule_date" required><br>
    <label>Passenger Type:</label>
    <select name="passenger_type">
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Anyone">Anyone</option>
    </select><br>
    <input type="submit" value="Search">
  </form>

  {% if trips %}
    <h3>Available Trips</h3>
    <ul>
      {% for trip in trips %}
      <li>
        {{ trip.origin }} â†’ {{ trip.destination }} on {{ trip.schedule_date }} at {{ trip.schedule_time }}  
        (Seats left: {{ trip.available_seats }})  
        Break Points: {{ trip.break_points | join(', ') }}
        <form method="POST" action="/book_trip">
          <input type="hidden" name="trip_id" value="{{ trip.id }}">
          <label>Seats:</label>
          <input type="number" name="num_people" min="1" max="{{ trip.available_seats }}" required>
          <input type="submit" value="Book">
        </form>
      </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endblock %}